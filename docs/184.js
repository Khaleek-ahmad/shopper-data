(self.webpackChunkshopper_data=self.webpackChunkshopper_data||[]).push([[184],{9160:(e,t,o)=>{var n,i;n=[o,t,o(5374),o(7390),o(7368),o(5374)],void 0===(i=(function(e,t,o,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginRoutingModule=void 0;const s=[{path:"",component:n.LoginComponent}];class a{}t.LoginRoutingModule=a,a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.\u0275\u0275defineNgModule({type:a}),a.\u0275inj=i.\u0275\u0275defineInjector({imports:[[o.RouterModule.forChild(s)],o.RouterModule]})}).apply(t,n))||(e.exports=i)},5184:(e,t,o)=>{var n,i;n=[o,t,o(1116),o(9160),o(1041),o(7709),o(7368),o(7709)],void 0===(i=(function(e,t,o,n,i,r,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginModule=void 0;class l{}t.LoginModule=l,l.\u0275fac=function(e){return new(e||l)},l.\u0275mod=s.\u0275\u0275defineNgModule({type:l}),l.\u0275inj=s.\u0275\u0275defineInjector({imports:[[o.CommonModule,n.LoginRoutingModule,i.FormsModule,r.NgxLoadingModule.forRoot({}),i.ReactiveFormsModule]]})}).apply(t,n))||(e.exports=i)},7390:(e,t,o)=>{var n,i;n=[o,t,o(7368),o(5065),o(9757),o(1041),o(7368),o(1041),o(2266),o(5374),o(2868),o(7185),o(1116),o(7709)],void 0===(i=(function(e,t,o,n,i,r,s,a,l,d,u,m,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginComponent=void 0;const g=function(){return{backdropBorderRadius:"3px"}};function f(e,t){if(1&e){const e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"form",1),s.\u0275\u0275element(1,"ngx-loading",2),s.\u0275\u0275elementStart(2,"div",3),s.\u0275\u0275elementStart(3,"div",4),s.\u0275\u0275elementStart(4,"div",5),s.\u0275\u0275elementStart(5,"a",6),s.\u0275\u0275element(6,"img",7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"div",8),s.\u0275\u0275element(8,"input",9),s.\u0275\u0275elementStart(9,"span"),s.\u0275\u0275text(10,"Username"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"div",8),s.\u0275\u0275element(12,"input",10),s.\u0275\u0275elementStart(13,"span"),s.\u0275\u0275text(14,"Password"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(15,"div",8),s.\u0275\u0275elementStart(16,"span"),s.\u0275\u0275text(17,"Forgort Password"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(18,"div",11),s.\u0275\u0275elementStart(19,"button",12),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().onSubmit()}),s.\u0275\u0275text(20,"Login"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275property("formGroup",e.loginForm),s.\u0275\u0275advance(1),s.\u0275\u0275property("show",e.loading)("config",s.\u0275\u0275pureFunction0(3,g))}}class h{constructor(e,t,i,r,s,a){this.fb=e,this.httpService=t,this.router=i,this.authService=r,this.route=s,this.tokenStorage=a,this.difference="",this.loginOut=new o.EventEmitter,this.showLoginPage=!1,this.loading=!0,this.apiServer=n.AppConfig.settings.apiServer}ngOnInit(){this.showLoginPage=!0,this.loading=!1,this.init()}init(){this.loginForm=this.fb.group({email:["",r.Validators.required],password:["",r.Validators.required]})}onSubmit(){if(this.loginForm.invalid)return;if(""!=this.difference)return;let e=this.loginForm.value.email,t=this.loginForm.value.password;this.loading=!0,this.httpService.userAuthentication(this.apiServer[i.Constants.BASE_URL]+this.apiServer.authentication.endPoint,e,t).subscribe(t=>{if(200==t.status&&null!=t.body){let o=t.body;this.loading=!1,sessionStorage.basic=e,this.authService.saveToken(JSON.stringify(o.token)),this.tokenStorage.saveToken(o.token),sessionStorage.setItem("userToken",JSON.stringify(o.token)),sessionStorage.setItem("userName",e),this.router.navigate(["generic/dashboard/category"])}},e=>{throw this.loading=!1,e})}}t.LoginComponent=h,h.\u0275fac=function(e){return new(e||h)(s.\u0275\u0275directiveInject(a.FormBuilder),s.\u0275\u0275directiveInject(l.HttpService),s.\u0275\u0275directiveInject(d.Router),s.\u0275\u0275directiveInject(u.AuthService),s.\u0275\u0275directiveInject(d.ActivatedRoute),s.\u0275\u0275directiveInject(m.TokenStorageService))},h.\u0275cmp=s.\u0275\u0275defineComponent({type:h,selectors:[["app-login"]],outputs:{loginOut:"loginOut"},decls:1,vars:1,consts:[["class","form-group mt-4_","autocomplete","on","novalidate","","style","height:100%;",3,"formGroup",4,"ngIf"],["autocomplete","on","novalidate","",1,"form-group","mt-4_",2,"height","100%",3,"formGroup"],[3,"show","config"],[1,"login-wrapper"],[1,"login-box"],[1,"navbar1"],[1,"navbar-brand"],["src","assets/images/dashboard.png","alt","dashboard",2,"width","250px","margin-bottom","5em"],[1,"form-group"],["type","text","formControlName","email",1,"form-control"],["type","password","formControlName","password",1,"form-control"],[1,"btn-bar"],["type","submit",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&s.\u0275\u0275template(0,f,21,4,"form",0),2&e&&s.\u0275\u0275property("ngIf",t.showLoginPage)},directives:[c.NgIf,a.\u0275NgNoValidate,a.NgControlStatusGroup,a.FormGroupDirective,p.NgxLoadingComponent,a.DefaultValueAccessor,a.NgControlStatus,a.FormControlName],styles:[""]})}).apply(t,n))||(e.exports=i)}}]);